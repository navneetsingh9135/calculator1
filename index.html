<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, #1f2937, #111827);
        }
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
        }
        .calculator-button {
            @apply p-4 rounded-xl text-white font-semibold transition-transform transform hover:scale-105 active:scale-95 shadow-md;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 text-white">

    <div class="calculator-container bg-gray-800 p-6 rounded-3xl shadow-2xl w-full max-w-sm">
        <!-- Display -->
        <div class="mb-4">
            <input id="history-display" type="text" class="w-full text-right bg-gray-700 text-gray-400 text-sm px-3 pt-2 rounded-t-xl" value="" readonly>
            <input id="main-display" type="text" class="w-full text-right bg-gray-700 text-white text-3xl font-bold px-3 pb-2 rounded-b-xl focus:outline-none" value="0" readonly>
        </div>

        <!-- Buttons Grid -->
        <div class="calculator-grid">
            <!-- Row 1 (Scientific Functions) -->
            <button class="calculator-button bg-gray-600" onclick="handleInput('sin(')">sin</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('cos(')">cos</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('tan(')">tan</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('log(')">log</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('sqrt(')">√</button>

            <!-- Row 2 -->
            <button class="calculator-button bg-gray-600" onclick="handleInput('π')">π</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('e')">e</button>
            <button class="calculator-button bg-orange-500" onclick="handleClear('AC')">AC</button>
            <button class="calculator-button bg-orange-500" onclick="handleClear('DEL')">DEL</button>
            <button class="calculator-button bg-orange-500" onclick="handleInput('/')">÷</button>

            <!-- Row 3 -->
            <button class="calculator-button bg-gray-700" onclick="handleInput('7')">7</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('8')">8</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('9')">9</button>
            <button class="calculator-button bg-orange-500" onclick="handleInput('*')">×</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput('(')">(</button>

            <!-- Row 4 -->
            <button class="calculator-button bg-gray-700" onclick="handleInput('4')">4</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('5')">5</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('6')">6</button>
            <button class="calculator-button bg-orange-500" onclick="handleInput('-')">−</button>
            <button class="calculator-button bg-gray-600" onclick="handleInput(')')">)</button>

            <!-- Row 5 -->
            <button class="calculator-button bg-gray-700" onclick="handleInput('1')">1</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('2')">2</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('3')">3</button>
            <button class="calculator-button bg-orange-500" onclick="handleInput('+')">+</button>
            <button class="calculator-button bg-blue-500 row-span-2" onclick="calculateResult()">=</button>

            <!-- Row 6 -->
            <button class="calculator-button bg-gray-700 col-span-2" onclick="handleInput('0')">0</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('.')">.</button>
            <button class="calculator-button bg-gray-700" onclick="handleInput('^')">^</button>

        </div>
    </div>

    <script>
        const historyDisplay = document.getElementById('history-display');
        const mainDisplay = document.getElementById('main-display');
        let expression = '';

        const operations = {
            '÷': '/',
            '×': '*',
            '−': '-',
            'π': 'Math.PI',
            'e': 'Math.E',
            'sin(': 'Math.sin(',
            'cos(': 'Math.cos(',
            'tan(': 'Math.tan(',
            'log(': 'Math.log10(', // Using log10 for common log
            'sqrt(': 'Math.sqrt(',
            '^': '**'
        };

        function handleInput(value) {
            // If the display is '0' and the new input is not an operator or '.'
            if (mainDisplay.value === '0' && !['+', '-', '*', '/', '.', 'sin(', 'cos(', 'tan(', 'log(', 'sqrt(', '^'].includes(value)) {
                mainDisplay.value = value;
            } else {
                mainDisplay.value += value;
            }
            expression += operations[value] || value;
            historyDisplay.value = mainDisplay.value.replace(/sin|cos|tan|log|sqrt/g, (match) => {
                return match.slice(0, 3);
            });
        }

        function handleClear(type) {
            if (type === 'AC') {
                mainDisplay.value = '0';
                historyDisplay.value = '';
                expression = '';
            } else if (type === 'DEL') {
                mainDisplay.value = mainDisplay.value.slice(0, -1);
                expression = expression.slice(0, -1);
                if (mainDisplay.value === '') {
                    mainDisplay.value = '0';
                }
            }
        }

        function calculateResult() {
            try {
                // Replace functions with Math. functions for evaluation
                const safeExpression = expression.replace(/sin\(/g, 'Math.sin(')
                                                 .replace(/cos\(/g, 'Math.cos(')
                                                 .replace(/tan\(/g, 'Math.tan(')
                                                 .replace(/log\(/g, 'Math.log10(')
                                                 .replace(/sqrt\(/g, 'Math.sqrt(')
                                                 .replace(/π/g, 'Math.PI')
                                                 .replace(/e/g, 'Math.E');

                const result = eval(safeExpression);
                historyDisplay.value = mainDisplay.value + ' =';
                mainDisplay.value = result;
                expression = result.toString();
            } catch (error) {
                historyDisplay.value = '';
                mainDisplay.value = 'Error';
                expression = '';
            }
        }

        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            const key = e.key;
            if ((key >= '0' && key <= '9') || key === '.') {
                handleInput(key);
            } else if (key === '+') {
                handleInput('+');
            } else if (key === '-') {
                handleInput('−');
            } else if (key === '*') {
                handleInput('×');
            } else if (key === '/') {
                handleInput('÷');
            } else if (key === 'Enter' || key === '=') {
                calculateResult();
            } else if (key === 'Backspace') {
                handleClear('DEL');
            } else if (key === 'Escape') {
                handleClear('AC');
            }
        });

    </script>
</body>
</html>
